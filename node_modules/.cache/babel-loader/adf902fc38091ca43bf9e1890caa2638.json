{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\1\\\\Desktop\\\\practice\\\\src\\\\pages\\\\articleadding.js\";\nimport React from 'react';\nimport './articleadding.css';\nimport './login.css';\nimport * as firebase from 'firebase';\n\nclass ArticleAdding extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleCheckBox = e => {\n      if (this.state.mainpage == true) {\n        this.state.mainpage = false;\n      } else {\n        this.state.mainpage = true;\n      }\n    };\n\n    this.handlePicUpload = e => {\n      const value = e.target.value;\n\n      if (e.target.files[0].type != 'image/png' && e.target.files[0].type != 'image/jpg') {\n        alert(\"Неправильный тип файла!\");\n        this.setState({\n          img: null\n        });\n      } else {\n        this.setState({\n          img: e.target.files[0]\n        });\n      }\n    };\n\n    this.handleUserInput = e => {\n      const name = e.target.name;\n      const value = e.target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.state = {\n      title: 'testtitle',\n      maintext: 'testtext',\n      img: null,\n      mainpage: false\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handlePicUpload = this.handlePicUpload.bind(this);\n    this.handleCheckBox = this.handleCheckBox.bind(this);\n  }\n\n  handleClick() {\n    var d = new Date();\n    var timestamp = d.getTime();\n    var day = d.getDate();\n    var month = d.getMonth() + 1;\n    var year = d.getFullYear();\n\n    if (this.state.title != null && this.state.maintext != null && this.state.img != null) {\n      var jsdate = new Date();\n      firebase.database().ref('postinfo/' + this.state.title).set({\n        title: this.state.title,\n        maintext: this.state.maintext,\n        date: day + \".\" + month + \".\" + year,\n        jsdate: timestamp\n      });\n\n      if (this.state.mainpage == true) {\n        var jsdate = new Date();\n        firebase.database().ref('mainpagepostinfo/' + this.state.title).set({\n          title: this.state.title,\n          maintext: this.state.maintext,\n          date: day + \".\" + month + \".\" + year,\n          jsdate: timestamp\n        });\n      }\n\n      var storageRef = firebase.storage().ref();\n      var file = this.state.img;\n      var metadata = {\n        contentType: this.state.img.type\n      };\n      var uploadTask = storageRef.child('images/' + this.state.title).put(file, metadata);\n      uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, // or 'state_changed'\n      function (snapshot) {\n        var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log('Upload is ' + progress + '% done');\n\n        switch (snapshot.state) {\n          case firebase.storage.TaskState.PAUSED:\n            // or 'paused'\n            console.log('Upload is paused');\n            break;\n\n          case firebase.storage.TaskState.RUNNING:\n            // or 'running'\n            console.log('Upload is running');\n            break;\n        }\n      }, function (error) {\n        // A full list of error codes is available at\n        // https://firebase.google.com/docs/storage/web/handle-errors\n        switch (error.code) {\n          case 'storage/unauthorized':\n            // User doesn't have permission to access the object\n            break;\n\n          case 'storage/canceled':\n            // User canceled the upload\n            break;\n\n          case 'storage/unknown':\n            alert(\"storage/unknown\");\n            break;\n        }\n      }, function () {\n        // Upload completed successfully, now we can get the download URL\n        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n          alert('File available at', downloadURL);\n        });\n      });\n    } else {\n      alert(\"error\");\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"articleaddingform\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 5\n      }\n    }, \"Title\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      required: true,\n      className: \"form-control\",\n      name: \"title\",\n      placeholder: \"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A \\u0441\\u0442\\u0430\\u0442\\u044C\\u0438\",\n      value: this.state.title,\n      onChange: this.handleUserInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 5\n      }\n    }, \"Text\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"textarea\",\n      height: \"300px\",\n      className: \"form-control bigtext\",\n      name: \"maintext\",\n      placeholder: \"\\u0421\\u043E\\u0434\\u0435\\u0440\\u0436\\u0438\\u043C\\u043E\\u0435 \\u0441\\u0442\\u0430\\u0442\\u044C\\u0438\",\n      value: this.state.maintext,\n      onChange: this.handleUserInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 5\n      }\n    }, \"\\u041A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0430 (jpeg/png)\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: \"image\",\n      id: \"articleimg\",\n      class: \"\",\n      accept: \".png,.jpg\",\n      onChange: this.handlePicUpload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 1\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 5\n      }\n    }, \"\\u0421\\u0442\\u0430\\u0442\\u044C\\u044F \\u0434\\u043B\\u044F \\u0433\\u043B\\u0430\\u0432\\u043D\\u043E\\u0439 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u044B(\\u043E\\u0447\\u0435\\u043D\\u044C \\u0438\\u043D\\u0442\\u0435\\u0440\\u0435\\u0441\\u043D\\u0430\\u044F).\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: \"mainpage\",\n      onChange: this.handleCheckBox,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 5\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 12\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleClick,\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 3\n      }\n    }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0442\\u0430\\u0442\\u044C\\u044E!\")));\n  }\n\n}\n\nexport default ArticleAdding;","map":{"version":3,"sources":["C:/Users/1/Desktop/practice/src/pages/articleadding.js"],"names":["React","firebase","ArticleAdding","Component","constructor","props","handleCheckBox","e","state","mainpage","handlePicUpload","value","target","files","type","alert","setState","img","handleUserInput","name","title","maintext","handleClick","bind","d","Date","timestamp","getTime","day","getDate","month","getMonth","year","getFullYear","jsdate","database","ref","set","date","storageRef","storage","file","metadata","contentType","uploadTask","child","put","on","TaskEvent","STATE_CHANGED","snapshot","progress","bytesTransferred","totalBytes","console","log","TaskState","PAUSED","RUNNING","error","code","getDownloadURL","then","downloadURL","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './articleadding.css';\r\nimport './login.css';\r\nimport * as firebase from 'firebase';\r\n\r\n\r\nclass ArticleAdding extends React.Component {\r\n\r\n  constructor (props) {\r\n    super(props);\r\n    this.state = {\r\n      title: 'testtitle',\r\n      maintext: 'testtext',\r\n      img: null,\r\n      mainpage: false\r\n    };\r\n\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handlePicUpload = this.handlePicUpload.bind(this);\r\n\r\n        this.handleCheckBox = this.handleCheckBox.bind(this);\r\n  }\r\n\r\n\r\n  handleCheckBox = (e) => {\r\n      if(this.state.mainpage == true) {this.state.mainpage = false;}\r\n\r\n      else {this.state.mainpage = true;}\r\n  }\r\n\r\n  handlePicUpload = (e) => {\r\n    const value = e.target.value;\r\n    if(e.target.files[0].type != 'image/png' && e.target.files[0].type != 'image/jpg') {\r\n    alert(\"Неправильный тип файла!\");\r\n    this.setState({img: null});\r\n  }\r\n\r\n  else {\r\n    this.setState({img: e.target.files[0]});\r\n  }\r\n}\r\n\r\n  handleUserInput = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n    this.setState({[name]: value});\r\n  }\r\n\r\n  handleClick()\r\n  {\r\n\r\n var d = new Date();\r\n var timestamp = d.getTime();\r\n var day = d.getDate();\r\n var month = d.getMonth() + 1;\r\n var year = d.getFullYear();\r\n\r\n if(this.state.title != null && this.state.maintext != null && this.state.img != null) {\r\n\r\n   var jsdate = new Date();\r\n  firebase.database().ref('postinfo/' + this.state.title).set({\r\n    title: this.state.title,\r\n    maintext: this.state.maintext,\r\n    date: day+\".\"+month+\".\"+year,\r\n    jsdate: timestamp\r\n  });\r\n\r\n  if(this.state.mainpage == true)\r\n  {\r\n    var jsdate = new Date();\r\n\r\n    firebase.database().ref('mainpagepostinfo/' + this.state.title).set({\r\n      title: this.state.title,\r\n      maintext: this.state.maintext,\r\n      date: day+\".\"+month+\".\"+year,\r\n      jsdate: timestamp\r\n    });\r\n  }\r\n\r\n\r\n  var storageRef = firebase.storage().ref();\r\n\r\n\r\n  var file = this.state.img;\r\n\r\n    var metadata = {\r\n    contentType: this.state.img.type,\r\n  };\r\n\r\n  var uploadTask = storageRef.child('images/' + this.state.title).put(file, metadata);\r\n\r\n  uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, // or 'state_changed'\r\n    function(snapshot) {\r\n      var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n      console.log('Upload is ' + progress + '% done');\r\n      switch (snapshot.state) {\r\n        case firebase.storage.TaskState.PAUSED: // or 'paused'\r\n          console.log('Upload is paused');\r\n          break;\r\n        case firebase.storage.TaskState.RUNNING: // or 'running'\r\n          console.log('Upload is running');\r\n          break;\r\n      }\r\n    }, function(error) {\r\n\r\n    // A full list of error codes is available at\r\n    // https://firebase.google.com/docs/storage/web/handle-errors\r\n    switch (error.code) {\r\n      case 'storage/unauthorized':\r\n        // User doesn't have permission to access the object\r\n        break;\r\n\r\n      case 'storage/canceled':\r\n        // User canceled the upload\r\n        break;\r\n\r\n      case 'storage/unknown':\r\n          alert(\"storage/unknown\");\r\n        break;\r\n    }\r\n  }, function() {\r\n    // Upload completed successfully, now we can get the download URL\r\n    uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\r\n      alert('File available at', downloadURL);\r\n    });\r\n  });\r\n\r\n}\r\n\r\nelse {\r\n  alert(\"error\");\r\n}\r\n\r\n  }\r\n\r\n  render() {\r\n      return(\r\n    <div>\r\n    <div className = \"container\">\r\n    <form className=\"articleaddingform\">\r\n\r\n\r\n    <div>\r\n      Title\r\n      <input type=\"text\" required className=\"form-control\" name=\"title\"\r\n        placeholder=\"Заголовок статьи\"\r\n        value={this.state.title}\r\n        onChange={this.handleUserInput}  />\r\n    </div>\r\n    <br />\r\n    <div>\r\n      Text\r\n      <input type=\"textarea\" height=\"300px\" className=\"form-control bigtext\" name=\"maintext\"\r\n        placeholder=\"Содержимое статьи\"\r\n        value={this.state.maintext}\r\n        onChange={this.handleUserInput}  />\r\n    </div>\r\n    <br />\r\n\r\n    <div>\r\n        Картинка (jpeg/png)\r\n        <input type=\"file\" name=\"image\" id=\"articleimg\" class=\"\" accept=\".png,.jpg\" onChange = {this.handlePicUpload}/>\r\n    </div>\r\n\r\n<br />\r\n    <div>\r\n      Статья для главной страницы(очень интересная).\r\n      <input type=\"checkbox\" name=\"mainpage\" onChange={this.handleCheckBox}/>\r\n    </div>\r\n    <br /> <br /> \r\n  </form>\r\n  <button onClick={this.handleClick} className=\"btn btn-primary\">Отправить статью!</button>\r\n  </div>\r\n  </div>\r\n\r\n)\r\n}\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default ArticleAdding;\r\n"]},"metadata":{},"sourceType":"module"}