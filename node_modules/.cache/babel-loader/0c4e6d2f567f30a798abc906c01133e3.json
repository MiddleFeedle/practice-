{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\1\\\\Desktop\\\\practice\\\\src\\\\pages\\\\rightbar.js\";\nimport React from 'react';\nimport * as firebase from 'firebase';\nimport './rightbar.css';\n\nclass RightBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      postinfo: [],\n      urls: []\n    };\n  }\n\n  componentDidMount() {\n    let newState = [];\n    let db = firebase.database();\n    const postdata = db.ref('postinfo');\n    let picurls = [];\n    var storageRef = firebase.storage().ref();\n    postdata.on('value', snapshot => {\n      let posts = snapshot.val();\n\n      for (let post in posts) {\n        storageRef.child('images/' + posts[post].title).getDownloadURL().then(url => {\n          picurls.push({\n            url\n          });\n          this.setState({\n            urls: picurls\n          });\n        });\n        newState.push({\n          id: post,\n          title: posts[post].title,\n          maintext: posts[post].maintext,\n          date: posts[post].date,\n          jsdate: posts[post].jsdate\n        });\n      }\n\n      this.setState({\n        postinfo: newState\n      });\n    });\n    const app = firebase.app();\n    db = firebase.firestore();\n    const admin = db.collection('admins');\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        var query = null;\n        query = admin.where(\"id\", \"==\", user.uid);\n\n        if (query != null) {\n          this.setState({\n            edit: true\n          });\n        }\n      }\n    });\n  }\n\n  render() {\n    const test = [];\n    var i = 0;\n    this.state.urls.map(u => {\n      test[i] = u.url;\n      i++;\n    }); // alert(JSON.stringify(test));\n\n    const myData = [].concat(this.state.postinfo).sort((a, b) => a.jsdate < b.jsdate ? 1 : -1);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 sidebar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebar-title-cover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"sidebar-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 41\n      }\n    }, \"\\u0413\\u043E\\u0440\\u044F\\u0447\\u0438\\u0435 \\u043D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"rightnews\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }, myData.map((postinfo, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"rightnews_item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"rightnews_item_name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: '/articles/' + postinfo.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 64\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 99\n        }\n      }, postinfo.title)), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"smalltext\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }\n      }, postinfo.date), /*#__PURE__*/React.createElement(\"figure\", {\n        className: \"rightbar_pic\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: '/articles/' + postinfo.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 27\n        }\n      }, postinfo.title, /*#__PURE__*/React.createElement(\"img\", {\n        src: test[index],\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 31\n        }\n      }, \" \")))));\n    })))));\n  }\n\n}\n\nexport default RightBar;","map":{"version":3,"sources":["C:/Users/1/Desktop/practice/src/pages/rightbar.js"],"names":["React","firebase","RightBar","Component","constructor","props","state","postinfo","urls","componentDidMount","newState","db","database","postdata","ref","picurls","storageRef","storage","on","snapshot","posts","val","post","child","title","getDownloadURL","then","url","push","setState","id","maintext","date","jsdate","app","firestore","admin","collection","auth","onAuthStateChanged","user","query","where","uid","edit","render","test","i","map","u","myData","concat","sort","a","b","index"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport * as firebase from 'firebase';\r\n\r\nimport './rightbar.css';\r\n\r\n\r\nclass RightBar extends React.Component\r\n{\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      postinfo: [],\r\n      urls: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    let newState = [];\r\n    let db = firebase.database();\r\n    const postdata = db.ref('postinfo');\r\n    let picurls = [];\r\n    var storageRef = firebase.storage().ref();\r\n\r\n\r\n    postdata.on('value', (snapshot) =>\r\n    {\r\n        let posts = snapshot.val();\r\n        for(let post in posts)\r\n         {\r\n          storageRef.child('images/' + posts[post].title).getDownloadURL().then((url) => {\r\n            picurls.push({url});\r\n            this.setState({ urls: picurls});\r\n          });\r\n\r\n          newState.push({\r\n            id: post,\r\n            title: posts[post].title,\r\n            maintext: posts[post].maintext,\r\n            date: posts[post].date,\r\n            jsdate: posts[post].jsdate,\r\n          });\r\n        }\r\n\r\nthis.setState({\r\n  postinfo: newState\r\n});\r\n\r\n\r\n});\r\n\r\n\r\n\r\n\r\nconst app = firebase.app();\r\ndb = firebase.firestore();\r\nconst admin = db.collection('admins');\r\n\r\n\r\nfirebase.auth().onAuthStateChanged(user => {\r\n     if (user)\r\n     {\r\n      var query = null;\r\n      query = admin.where(\"id\", \"==\", user.uid);\r\n\r\n          if(query != null)\r\n           {\r\n             this.setState({\r\n                edit: true\r\n             });\r\n          }\r\n }});\r\n\r\n    }\r\n\r\n\r\n  render()\r\n  {\r\n\r\nconst test = [];\r\nvar i = 0;\r\nthis.state.urls.map((u) => {\r\n    test[i] = u.url;\r\n    i++;\r\n  });\r\n\r\n // alert(JSON.stringify(test));\r\n\r\n\r\n    const myData = [].concat(this.state.postinfo)\r\n   .sort((a, b) => a.jsdate < b.jsdate ? 1 : -1);\r\n    return (\r\n<div>\r\n\r\n<div className = \"col-md-4 sidebar\">\r\n      <div className = \"sidebar-title-cover\">\r\n        <h4 className = \"sidebar-title\"><span>Горячие новости</span></h4>\r\n          <div className = \"rightnews\">\r\n\r\n          {  myData.map((postinfo, index) => {\r\n              return(\r\n                <div className = \"rightnews_item\">\r\n\r\n                        <div className = \"rightnews_item_name\"><a href={'/articles/'+postinfo.id}><strong>{postinfo.title}</strong></a>\r\n                        <p className = \"smalltext\">{postinfo.date}</p>\r\n                        <figure className = \"rightbar_pic\">\r\n                          <a href={'/articles/'+postinfo.id}>{postinfo.title}\r\n\r\n                              <img src={test[index]} alt=\"\"> </img>\r\n\r\n                          </a>\r\n                        </figure>\r\n                </div>\r\n\r\n                </div>\r\n              )\r\n            }\r\n          )}\r\n        </div>\r\n      </div>\r\n  </div>\r\n\r\n\r\n</div>\r\n\r\n    );\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\nexport default RightBar;\r\n"]},"metadata":{},"sourceType":"module"}